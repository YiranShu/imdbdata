[["index.html", "Movie Genres Chapter 1 Introduction 1.1 How have the genres of movies been changing since last century? 1.2 What was the relationship between genres and ratings? For example, what genres were more likely to gain higher ratings? 1.3 For each director, did he/she have a preference in any genres?", " Movie Genres Yiran Shu, Qingyi Zhang, Tianxiang Li 2021-12-13 Chapter 1 Introduction Watching movies is one of the most popular activities in our daily life. So with time going by, the movie genre have changed a lot. Are there any relationships between movie genres and the ratings, or between the directors and movie genres? Our goal is to explore some interesting facts about different movie genres. We will find out three main questions as follows: 1.1 How have the genres of movies been changing since last century? We will use title.basics.tsv.gz on https://datasets.imdbws.com/. It has not only tconst, which identifies the title of each movie, but also startYear and genres features so we can visualize the change of genre popularity since 1900. 1.2 What was the relationship between genres and ratings? For example, what genres were more likely to gain higher ratings? We will use title.ratings.tsv.gz and title.basics.tsv.gz on https://datasets.imdbws.com/. There are features tconst, averageRating and numVotes in title.ratings.tsv.gz. The feature tconst identifies the title of each movie and links the genres feature in title.basics.tsv.gz. With these features, we can visualize the relationship between genres and ratings. 1.3 For each director, did he/she have a preference in any genres? We can first group movies by directors using title.crew.tsv.gz and title.basics.tsv.gz. For each director, we will explore his/her movies and genres so we could conclude if the director preferred certain genres. "],["data-sources.html", "Chapter 2 Data sources 2.1 URL of data sources 2.2 Basic information 2.3 Issues", " Chapter 2 Data sources 2.1 URL of data sources Our data are collected from a website of IMDB (https://datasets.imdbws.com/). Collecting the datasets is pretty straightforward. We just downloaded the tsv.gz files we need. These files are title.ratings.tsv.gz, name.basics.tsv.gz, title.basics.tsv.gz, title.crew.tsv.gz, and title.principals.tsv.gz. 2.2 Basic information 2.2.1 title.basics Here are the first few rows of the dataframe of title.basics. head(title.basics) ## # A tibble: 6 x 9 ## tconst titleType primaryTitle originalTitle isAdult startYear endYear runtimeMinutes genres ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; ## 1 tt0000502 movie Bohemios Bohemios 0 1905 NA 100 &lt;NA&gt; ## 2 tt0000574 movie The Story of the Kelly Gang The Story of the Kelly Gang 0 1906 NA 70 Action,Adventur~ ## 3 tt0000591 movie The Prodigal Son L&#39;enfant prodigue 0 1907 NA 90 Drama ## 4 tt0000615 movie Robbery Under Arms Robbery Under Arms 0 1907 NA NA Drama ## 5 tt0000630 movie Hamlet Amleto 0 1908 NA NA Drama ## 6 tt0000675 movie Don Quijote Don Quijote 0 1908 NA NA Drama title.basics contains some basic information for movie or tv show titles. tconst (chr) - alphanumeric unique identifier of the title titleType (chr)  the type/format of the title (e.g.Â movie, short, tvseries, tvepisode, video, etc) primaryTitle (chr)  the more popular title / the title used by the filmmakers on promotional materials at the point of release originalTitle (chr) - original title, in the original language isAdult (dbl) - 0: non-adult title; 1: adult title startYear (chr)  represents the release year of a title. In the case of TV Series, it is the series start year endYear (chr)  TV Series end year.  for all other title types runtimeMinutes (chr)  primary runtime of the title, in minutes genres (chr)  includes up to three genres associated with the title The number of rows in the dataframe of title.basics is: nrow(title.basics) ## [1] 594338 2.2.2 name.basics Here are the first few rows of the dataframe of title.basics. head(name.basics) ## # A tibble: 6 x 6 ## nconst primaryName birthYear deathYear primaryProfession knownForTitles ## &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 nm0000001 Fred Astaire 1899 1987 soundtrack,actor,miscellaneous tt0053137,tt0031983,tt0072308,tt0050419 ## 2 nm0000002 Lauren Bacall 1924 2014 actress,soundtrack tt0117057,tt0071877,tt0038355,tt0037382 ## 3 nm0000003 Brigitte Bardot 1934 NA actress,soundtrack,music_department tt0049189,tt0057345,tt0054452,tt0056404 ## 4 nm0000004 John Belushi 1949 1982 actor,soundtrack,writer tt0077975,tt0080455,tt0072562,tt0078723 ## 5 nm0000005 Ingmar Bergman 1918 2007 writer,director,actor tt0050976,tt0060827,tt0050986,tt0083922 ## 6 nm0000006 Ingrid Bergman 1915 1982 actress,soundtrack,producer tt0034583,tt0077711,tt0038109,tt0036855 name.basics contains some basic information of people. nconst (chr) - alphanumeric unique identifier of the name/person primaryName (chr)  name by which the person is most often credited birthYear (chr)  birth year deathYear (chr)  death year primaryProfession (chr)  the top-3 professions of the person knownForTitles (chr)  titles the person is known for The number of rows in the dataframe of name.basics is: nrow(name.basics) ## [1] 11337796 2.2.3 title.ratings Here are the first few rows of the dataframe of title.ratings. head(title.ratings) ## # A tibble: 6 x 3 ## tconst averageRating numVotes ## &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 tt0000001 5.7 1845 ## 2 tt0000002 6 236 ## 3 tt0000003 6.5 1604 ## 4 tt0000004 6 153 ## 5 tt0000005 6.2 2425 ## 6 tt0000006 5.2 158 title.ratings contains the IMDb rating and votes information for titles. tconst (chr) - alphanumeric unique identifier of the title averageRating (dbl)  weighted average of all the individual user ratings numVotes (dbl) - number of votes the title has received The number of rows in the dataframe of title.ratings is: nrow(title.ratings) ## [1] 1194166 2.2.4 title.crew Here are the first few rows of the dataframe of title.crew. head(title.crew) ## # A tibble: 6 x 3 ## tconst directors writers ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 tt0000001 nm0005690 &lt;NA&gt; ## 2 tt0000002 nm0721526 &lt;NA&gt; ## 3 tt0000003 nm0721526 &lt;NA&gt; ## 4 tt0000004 nm0721526 &lt;NA&gt; ## 5 tt0000005 nm0005690 &lt;NA&gt; ## 6 tt0000006 nm0005690 &lt;NA&gt; title.crew contains the director and writer information for all the titles in IMDb. tconst (chr) - alphanumeric unique identifier of the title directors (chr) - director(s) of the given title writers (chr)  writer(s) of the given title The number of rows in the dataframe of title.crew is: nrow(title.crew) ## [1] 8463298 2.2.5 title.principals Here are the first few rows of the dataframe of title.principals. head(title.principals) ## # A tibble: 6 x 4 ## tconst ordering nconst category ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; ## 1 tt0000001 1 nm1588970 self ## 2 tt0000001 2 nm0005690 director ## 3 tt0000001 3 nm0374658 cinematographer ## 4 tt0000002 1 nm0721526 director ## 5 tt0000002 2 nm1335271 composer ## 6 tt0000003 1 nm0721526 director title.principals contains the principal cast/crew for titles. tconst (chr) - alphanumeric unique identifier of the title ordering (chr)  a number to uniquely identify rows for a given titleId nconst (chr) - alphanumeric unique identifier of the name/person category (chr) - the category of job that person was in job (chr) - the specific job title if applicable, else  characters (chr) - the name of the character played if applicable, else  The number of rows in the dataframe of title.principals is: nrow(title.principals) ## [1] 47198327 2.3 Issues There are some issues with the datasets. First, the data types of some columns are wrong. For example, runtimeMinutes should be integers rather than strings. Second, the missing values are represented with \\\\N. In the next section, we will transform the datasets so that they have correct data types and NA as missing values. "],["data-transformation.html", "Chapter 3 Data transformation 3.1 Missing values 3.2 Correct data type of columns 3.3 Genres 3.4 Save the transformed dataframes", " Chapter 3 Data transformation 3.1 Missing values 3.1.1 Initial data head(title.basics) ## # A tibble: 6 x 9 ## tconst titleType primaryTitle originalTitle isAdult startYear endYear runtimeMinutes genres ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; ## 1 tt0000502 movie Bohemios Bohemios 0 1905 NA 100 &lt;NA&gt; ## 2 tt0000574 movie The Story of the Kelly Gang The Story of the Kelly Gang 0 1906 NA 70 Action,Adventur~ ## 3 tt0000591 movie The Prodigal Son L&#39;enfant prodigue 0 1907 NA 90 Drama ## 4 tt0000615 movie Robbery Under Arms Robbery Under Arms 0 1907 NA NA Drama ## 5 tt0000630 movie Hamlet Amleto 0 1908 NA NA Drama ## 6 tt0000675 movie Don Quijote Don Quijote 0 1908 NA NA Drama We can see that missing values in this dataset are represented with \\\\N. 3.1.2 Replace \\\\N with NA title.basics &lt;- title.basics %&gt;% filter(titleType==&#39;movie&#39;) title.basics &lt;- subN(title.basics) name.basics &lt;- subN(name.basics) title.crew &lt;- subN(title.crew) title.principals &lt;- title.principals %&gt;% select(-c(&#39;job&#39;, &#39;characters&#39;)) title.principals &lt;- subN(title.principals) 3.1.3 Data after transformation of missing values head(title.basics) ## # A tibble: 6 x 9 ## tconst titleType primaryTitle originalTitle isAdult startYear endYear runtimeMinutes genres ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; ## 1 tt0000502 movie Bohemios Bohemios 0 1905 NA 100 &lt;NA&gt; ## 2 tt0000574 movie The Story of the Kelly Gang The Story of the Kelly Gang 0 1906 NA 70 Action,Adventur~ ## 3 tt0000591 movie The Prodigal Son L&#39;enfant prodigue 0 1907 NA 90 Drama ## 4 tt0000615 movie Robbery Under Arms Robbery Under Arms 0 1907 NA NA Drama ## 5 tt0000630 movie Hamlet Amleto 0 1908 NA NA Drama ## 6 tt0000675 movie Don Quijote Don Quijote 0 1908 NA NA Drama 3.2 Correct data type of columns We can see from the output of the previous head function that some columns had wrong data types. For example, startYear and endYear should be integer columns. So we have to correct them. title.basics$startYear &lt;- as.integer(title.basics$startYear) title.basics$endYear &lt;- as.integer(title.basics$endYear) title.basics$runtimeMinutes &lt;- as.integer(title.basics$runtimeMinutes) name.basics$birthYear &lt;- as.integer(name.basics$birthYear) name.basics$deathYear &lt;- as.integer(name.basics$deathYear) 3.3 Genres We can see from the output of the previous head function that a movie might have multiple genres separated by comma. So we would like to extract them and create a dataframe title.genres of pairs of movie id and a single genre. The dataframe of title.genres looks like this: head(title.genres) ## # A tibble: 6 x 2 ## tconst genres ## &lt;chr&gt; &lt;chr&gt; ## 1 tt0000574 Action ## 2 tt0000574 Adventure ## 3 tt0000574 Biography ## 4 tt0000591 Drama ## 5 tt0000615 Drama ## 6 tt0000630 Drama These are all genres: unique(title.genres$genres) ## [1] &quot;Action&quot; &quot;Adventure&quot; &quot;Biography&quot; &quot;Drama&quot; &quot;Fantasy&quot; &quot;Comedy&quot; &quot;War&quot; &quot;Documentary&quot; &quot;Crime&quot; ## [10] &quot;Romance&quot; &quot;Family&quot; &quot;History&quot; &quot;Sci-Fi&quot; &quot;Thriller&quot; &quot;Western&quot; &quot;Sport&quot; &quot;Mystery&quot; &quot;Horror&quot; ## [19] &quot;Music&quot; &quot;Animation&quot; &quot;Musical&quot; &quot;Film-Noir&quot; &quot;News&quot; &quot;Short&quot; &quot;Adult&quot; &quot;Reality-TV&quot; &quot;Talk-Show&quot; ## [28] &quot;Game-Show&quot; This plot shows frequencies of all kinds of genres. We can see that the number of dramas is the largest, almost twice as large as the number of documentaries and comedies. The frequencies of action movies, romantic movies, thrillers, crime movies, horror movies and adventure movies are close and more than the frequencies of other genres. In the interactive component section, we will mainly analyze some interesting facts about the most frequent genres. 3.4 Save the transformed dataframes Finally, we want to save the transformed dataframes so that we can load them anytime we want without perfroming the transformation again. save(title.genres, file=&#39;data/title.genres.RData&#39;) save(title.basics, file=&#39;data/title.basics.RData&#39;) save(name.basics, file=&#39;data/name.basics.RData&#39;) save(title.crew, file=&#39;data/title.crew.RData&#39;) save(title.principals, file=&#39;data/title.principals.RData&#39;) save(title.ratings, file=&#39;data/title.ratings.RData&#39;) "],["missing-values-1.html", "Chapter 4 Missing values 4.1 title.bacis", " Chapter 4 Missing values 4.1 title.bacis 4.1.1 Missing values by column colSums(is.na(title.basics)) %&gt;% sort(decreasing = TRUE) ## endYear runtimeMinutes startYear genres tconst titleType primaryTitle originalTitle isAdult ## 594338 220659 76086 71319 0 0 0 0 0 4.1.2 Missing patterns source(&quot;scripts/visna.R&quot;) visna(title.basics) visna(title.basics, percent=TRUE) From the graph, we can see that there are no missing values in columns nconst and primaryName. Most missing values are in columns deathYear and birthYear. This might be due to the difficulty of getting the specific birth and death time and the fact that some people are not dead. Only a minority of missing values are in columns primaryProfession and knownForTitles. Furthermore, deathYear and birthYear are both missing in most rows with missing data. It might be due to the high correlation between these 2 columns. Only a very small proportion of rows have no missing values. "],["results.html", "Chapter 5 Results 5.1 Movie ratings of different years 5.2 Number of votes 5.3 Dependency between votes, ratings and runtime 5.4 Movie titles 5.5 Analysis of Director", " Chapter 5 Results 5.1 Movie ratings of different years 5.1.1 Ratings for all movies IMDB rating is a good reference if we want to know the quality of different movies. Do different genres have obviously different average ratings? Has the quality of movies changed over time? We can find something from the figure below: main_genres &lt;- c( &#39;Drama&#39;,&#39;Comedy&#39;,&#39;Music&#39;,&#39;Documentary&#39;,&#39;Action&#39;, &#39;Romance&#39;, &quot;Thriller&quot;,&#39;Crime&#39;, &#39;Horror&#39;, &#39;Adventure&#39;, &#39;Biography&#39;, &#39;Sci-Fi&#39;) x &lt;- left_join(title.genres, title.basics, by=&#39;tconst&#39;) x &lt;- left_join(x, title.ratings, by=&#39;tconst&#39;) df &lt;- x %&gt;% filter(startYear&lt;=2020,startYear&gt;=1980, genres.x %in% main_genres, is.na(numVotes)==FALSE, is.na(averageRating)==FALSE) %&gt;% mutate(totalratings=numVotes*averageRating) %&gt;% group_by(startYear, genres.x) %&gt;% summarise(rating2=sum(totalratings)/sum(numVotes), .groups = &#39;drop&#39;) %&gt;% ungroup() xlabels = c(1980:2020) for (i in 1:length(xlabels)){ if (strtoi(xlabels[i])%%5!=0){ xlabels[i] &lt;- &quot;&quot; } } g2 &lt;-ggplot(df, aes(startYear, fct_rev(factor(genres.x)), fill = rating2)) + geom_tile(color = &quot;white&quot;) + coord_equal() + scale_fill_gradient(low=&quot;white&quot;, high=&quot;blue&quot;, guide = guide_colourbar(title=&#39;Weighted \\n Rating&#39;)) + scale_x_discrete(labels=xlabels) + xlab(&quot;&quot;) + ylab(&quot;&quot;) main_genres &lt;- c( &#39;Drama&#39;,&#39;Comedy&#39;,&#39;Music&#39;,&#39;Documentary&#39;,&#39;Action&#39;, &#39;Romance&#39;, &quot;Thriller&quot;,&#39;Crime&#39;, &#39;Horror&#39;, &#39;Adventure&#39;, &#39;Biography&#39;, &#39;Sci-Fi&#39;) df &lt;- x %&gt;% filter(startYear&lt;=2020,startYear&gt;=1980, genres.x %in% main_genres, is.na(numVotes)==FALSE, is.na(averageRating)==FALSE) %&gt;% group_by(startYear, genres.x) %&gt;% summarise(rating=mean(averageRating), .groups = &#39;drop&#39;) %&gt;% ungroup() xlabels = c(1980:2020) for (i in 1:length(xlabels)){ if (strtoi(xlabels[i])%%5!=0){ xlabels[i] &lt;- &quot;&quot; } } g1 &lt;- ggplot(df, aes(startYear, fct_rev(factor(genres.x)), fill = rating)) + geom_tile(color = &quot;white&quot;) + coord_equal() + scale_fill_gradient(low=&quot;white&quot;, high=&quot;blue&quot;, guide = guide_colourbar(title=&#39;Avg Rating&#39;)) + scale_x_discrete(labels=xlabels) + xlab(&quot;&quot;) + ylab(&quot;&quot;) g1 / g2 + # Create grid of plots with title plot_annotation(title = &quot;Ratings of different genres&quot;, caption=&quot;Year&quot;, theme = theme(plot.title = element_text(size = 15), plot.caption =element_text(size=12,hjust = 0.5,vjust=6) )) This is an interesting plot about the ratings of different genres changing with time. The top one calculates the average ratings of movies from each genre and each year. It seems that Documentary, Biograph and Music have the highest ratings, while ratings for Horro movies are the lowest. And there is no obvious trend along the Year dimension. However, lets consider this situation: there are two Action movies in 2050.One gets 10000 votes of 10 star, one gets gets 1 vote of 0 star. The average rating would be 5 star. This seems a little unfair, right? So we also use weighted average, where weights are their number of votes, and we get the bottom plot. Surprisingly, the ratings between different genres are not so large as we thought. Documentary and Biography are not much higher than the others, although Horro still seems the lowest. Another interesting discovery is that there is a trend along time: movies before 2000 clearly have higher weighted ratings than movies after 2000. Maybe this is a reflection that the quality of movies in recent years are not as well as before? 5.1.2 Rating distributions for 100 best movies Now that we have a view of ratings of all movies, what about those top-rating movies? Do people have preference among different genres when they are rating? We select 100 top-rating movies of different genres and plot their distributions: main_genres &lt;- c( &#39;Drama&#39;,&#39;Comedy&#39;,&#39;Music&#39;,&#39;Documentary&#39;,&#39;Action&#39;, &#39;Romance&#39;, &quot;Thriller&quot;,&#39;Crime&#39;, &#39;Horror&#39;, &#39;Adventure&#39;, &#39;Biography&#39;, &#39;Sci-Fi&#39;) x &lt;- left_join(title.genres, title.ratings, by=&#39;tconst&#39;) x1 &lt;- x %&gt;% filter(genres %in% main_genres, numVotes&gt;5000) %&gt;% group_by(genres) %&gt;% mutate(r=rank(averageRating*(-1))) %&gt;% ungroup() %&gt;% filter(r&lt;=100) x2 &lt;- left_join(x1, title.basics, by=&#39;tconst&#39;) x2$genres.x &lt;- with(x2 ,reorder(genres.x,averageRating,median)) x &lt;- left_join(title.genres, title.ratings, by=&#39;tconst&#39;) x1 &lt;- x %&gt;% filter(genres %in% main_genres) %&gt;% group_by(genres) %&gt;% mutate(r=rank(averageRating*(-1))) %&gt;% ungroup() %&gt;% filter(r&lt;=100) x22 &lt;- left_join(x1, title.basics, by=&#39;tconst&#39;) #x2$genres.x &lt;- with(x2 ,reorder(genres.x,averageRating,median)) library(ggridges) g &lt;- ggplot() + geom_density_ridges(data = x2, aes(y = genres.x, x = averageRating), alpha=0.8,color=&#39;white&#39;, fill=&#39;lightslateblue&#39;)+ geom_density_ridges(data = x22, aes(y = genres.x, x = averageRating), alpha=0.2,color=rgb(0,0,0, alpha=0, maxColorValue = 1), fill=&#39;red&#39;) + ylab(&quot;&quot;)+xlab(&quot;Rating&quot;)+ ggtitle(&#39;Rating distributions for 100 top-rating movies of each genre&#39;) g If we select movies from all of them, we get the red distributions. But if we only consider movies with more than 5000 votes, we get the purple ones. We find that Documentary has the highest median if we consider all movies, but it gets lower if we exclude those without enough votes. It turns out that there are many documentary movies only have 20 or 50 votes with almost 10 star ratings. Its the same with biography and music movies. If we exclude these not well-know works, we can get a picture of the preferences of the most population. It shows that people tend to give higher ratings for Romance movies, while its very hard for Horro movies to get high scores. 5.2 Number of votes As we can see, those movies with few votes can cause big difference when we are analysing the data. What are these movies like? We select those movies with less than 5,000 votes on IMDB and see where they come from: x &lt;- left_join(title.genres, title.ratings, by=&#39;tconst&#39;) x1 &lt;- x %&gt;% filter(numVotes&lt;5000) x2 &lt;- left_join(x1, title.basics, by=&#39;tconst&#39;) x3 &lt;- x2 %&gt;% group_by(genres.x) %&gt;% summarise(c=n()) %&gt;% ungroup() library(treemap) treemap(x3, index=&quot;genres.x&quot;, vSize=&quot;c&quot;, type=&quot;index&quot;, title=&#39;Movies (votes&lt;5000)&#39;,fontsize.title=12) These movies mostly come from Drama, Comedy, Documentary, which is not very surprising. However, we can sense that they may have different ratings, because when we exclude these movies, the average ratings of different genres change differently. So now we plot the ratings of these movies and get this: x &lt;- left_join(title.genres, title.ratings, by=&#39;tconst&#39;) main_genres = c(&#39;Documentary&#39;, &#39;Horror&#39;, &#39;Action&#39;, &#39;Drama&#39;) x1 &lt;- x %&gt;% filter(numVotes&lt;5000,numVotes&gt;0, genres %in% main_genres) cl &lt;- function(r){ if (r&gt;=0 &amp; r&lt;4) return(&#39;0-4&#39;) if (r&gt;=4 &amp; r&lt;6) return(&#39;4-6&#39;) if (r&gt;=6 &amp; r&lt;8) return(&#39;6-8&#39;) if (r&gt;=8 &amp; r&lt;=10) return(&#39;8-10&#39;) } x1$rating1 &lt;- lapply(x1$averageRating, cl) x1$rating2 &lt;- unlist(x1$rating1) x1$Rating &lt;- fct_rev(factor(x1$rating2)) x1$genres &lt;- factor(x1$genres) #levels(x1$genres) &lt;- c(&#39;Documentary&#39;, &#39;Drama&#39;,&#39;Crime&#39;,&#39;Action&#39;,&#39;Horror&#39;) x1$Genre &lt;- fct_rev(fct_relevel(x1$genres,&#39;Documentary&#39;, &#39;Drama&#39;,&#39;Action&#39;,&#39;Horror&#39;)) library(Lock5withR) library(vcd) mosaic(Rating~Genre, direction = c(&quot;v&quot;,&quot;h&quot;),x1,main=&#39;Ratings of movies (votes&lt;5000)&#39;) As we can see, among these movies, Documentary mostly have 6-8 stars, while Horro movies mostly have 0-6 stars. This proves what we think: there exists many documentary movies with small number of votes but very high ratings. 5.3 Dependency between votes, ratings and runtime Now we may wonder if votes and ratings have some relationship. The graph below shows the relationship among three variables: votes, ratings, and runtime. Note that we only select popular movies (with number of votes larger than 200,000) to exclude those noisy less popular movies. main_genres &lt;- c( &#39;Drama&#39;,&#39;Comedy&#39;,&#39;Music&#39;,&#39;Documentary&#39;,&#39;Action&#39;,&#39;Sci-Fi&#39;) x &lt;- left_join(title.basics, title.ratings, by=&#39;tconst&#39;) x$runtimeMinutes &lt;- as.integer(x$runtimeMinutes) x$numVotes &lt;- x$numVotes/1e3 x1 &lt;- x%&gt;% filter(genres %in% main_genres,is.na(runtimeMinutes)==FALSE, is.na(averageRating)==FALSE, is.na(numVotes)==FALSE, runtimeMinutes&lt;400,startYear&gt;=1940,startYear&lt;=2020, numVotes&gt;200) x1$votes_in_thousand &lt;- x1$numVotes x2 &lt;- x1 %&gt;%select(runtimeMinutes, averageRating, votes_in_thousand) library(GGally) ggpairs(x2, aes(alpha=0.5)) The average rating and number of votes have obvious relationship. This is not difficult to understand: better movies are usually more popular so more people would vote. We also find that longer movies tend to have higher ratings. This is an interesting discovery. One reason could be that longer movies usually come from those with meaningful topics, while entertainment movies are usually shorter. 5.4 Movie titles 5.4.1 Most common words in titles Do movies of different genres prefer different words in titles? For example, maybe there are a lot of heart in Romance movies titles? Here we select 15 most common words from Action, Animation, Romance, Sci_Fi (meaningless words like the, to are excluded): main_genres &lt;- c( &#39;Drama&#39;,&#39;Comedy&#39;,&#39;Music&#39;,&#39;Documentary&#39;,&#39;Action&#39;, &#39;Romance&#39;, &quot;Thriller&quot;,&#39;Crime&#39;, &#39;Horror&#39;, &#39;Adventure&#39;, &#39;Biography&#39;, &#39;Sci-Fi&#39;) x &lt;- left_join(title.genres, title.basics, by=&#39;tconst&#39;) x1 &lt;- x %&gt;% filter(startYear&gt;=1990, startYear&lt;=2020) WordFreq &lt;- function(text) { txt = text[text!=&quot;&quot;] txt = tolower(txt) txtList = lapply(txt, strsplit,&quot; &quot;) txtChar = unlist(txtList) txtChar = gsub(&quot;\\\\.|,|\\\\!|:|;|\\\\?&quot;,&quot;&quot;,txtChar) #clean symbol(.,!:;?) txtChar = txtChar[txtChar!=&quot;&quot;] data = as.data.frame(table(txtChar)) colnames(data) = c(&quot;Word&quot;,&quot;freq&quot;) ordFreq = data[order(data$freq,decreasing=T),] meaningless = c(&#39;the&#39;,&#39;of&#39;,&#39;a&#39;,&#39;and&#39;,&#39;2&#39;,&#39;3&#39;,&#39;in&#39;,&#39;movie&#39;,&#39;an&#39;,&#39;last&#39;,&#39;i&#39;,&#39;you&#39;,&#39;my&#39;,&#39;me&#39;,&#39;man&#39;,&#39;en&#39;,&#39;del&#39;,&#39;le&#39;,&#39;un&#39;,&#39;der&#39;,&#39;les&#39;,&#39;to&#39;,&#39;one&#39;,&#39;no&#39;,&#39;not&#39;,&#39;it&#39;,&#39;from&#39;,&#39;-&#39;,&#39;de&#39;,&#39;la&#39;,&#39;el&#39;,&#39;&amp;&#39;,&#39;for&#39;,&#39;on&#39;,&#39;is&#39;,&#39;with&#39;,&#39;at&#39;,&#39;ka&#39;,&#39;ii&#39;,&#39;ang&#39;,&#39;up&#39;,&#39;ng&#39;,&#39;na&#39;,&#39;your&#39;) ordFreq &lt;- ordFreq %&gt;% filter(!(Word %in% meaningless)) return(ordFreq) } text = x1 %&gt;% filter(genres.x==&#39;Romance&#39;) %&gt;% select(primaryTitle) ordFreq1 &lt;- WordFreq(text) ordFreq1$genre &lt;- &#39;Romance&#39; text = x1 %&gt;% filter(genres.x==&#39;Action&#39;) %&gt;% select(primaryTitle) ordFreq2 &lt;- WordFreq(text) ordFreq2$genre &lt;- &#39;Action&#39; text = x1 %&gt;% filter(genres.x==&#39;Animation&#39;) %&gt;% select(primaryTitle) ordFreq3 &lt;- WordFreq(text) ordFreq3$genre &lt;- &#39;&#39; text = x1 %&gt;% filter(genres.x==&#39;Sci-Fi&#39;) %&gt;% select(primaryTitle) ordFreq4 &lt;- WordFreq(text) ordFreq4$genre &lt;- &#39;Sci-Fi&#39; ordFreq &lt;- rbind(ordFreq1[1:15,], ordFreq2[1:15,]) g1 &lt;- ggplot(ordFreq1[1:15,], aes(x=freq, y=fct_reorder(Word, freq))) + geom_segment( aes(x=0, xend=freq, y=fct_reorder(Word, freq), yend=fct_reorder(Word, freq)), color=&quot;skyblue&quot;) + geom_point( color=&quot;blue&quot;, size=1, alpha=0.6) + ggtitle(&quot;Guess 1&quot;) + theme_light() + ylab(&quot;&quot;) + xlab(&quot;&quot;) + theme( panel.grid.major.y = element_blank(), panel.border = element_blank(), axis.ticks.y = element_blank() ) g2 &lt;- ggplot(ordFreq2[1:15,], aes(x=freq, y=fct_reorder(Word, freq))) + geom_segment( aes(x=0, xend=freq, y=fct_reorder(Word, freq), yend=fct_reorder(Word, freq)), color=&quot;skyblue&quot;) + geom_point( color=&quot;blue&quot;, size=1, alpha=0.6) + ggtitle(&quot;Guess 2&quot;) + theme_light() + scale_x_continuous(breaks = c(0,100,200,300,400), labels=c(0,&quot;&quot;,200,&quot;&quot;,400))+ ylab(&quot;&quot;) + xlab(&quot;&quot;) + theme( panel.grid.major.y = element_blank(), panel.border = element_blank(), axis.ticks.y = element_blank() ) g3 &lt;- ggplot(ordFreq3[1:15,], aes(x=freq, y=fct_reorder(Word, freq))) + geom_segment( aes(x=0, xend=freq, y=fct_reorder(Word, freq), yend=fct_reorder(Word, freq)), color=&quot;skyblue&quot;) + geom_point( color=&quot;blue&quot;, size=1, alpha=0.6) + ggtitle(&quot;Guess 4&quot;) + theme_light() + ylab(&quot;&quot;) + xlab(&quot;&quot;) + theme( panel.grid.major.y = element_blank(), panel.border = element_blank(), axis.ticks.y = element_blank() ) g4 &lt;- ggplot(ordFreq4[1:15,], aes(x=freq, y=fct_reorder(Word, freq))) + geom_segment( aes(x=0, xend=freq, y=fct_reorder(Word, freq), yend=fct_reorder(Word, freq)), color=&quot;skyblue&quot;) + geom_point( color=&quot;blue&quot;, size=1, alpha=0.6) + ggtitle(&quot;Guess 3&quot;) + theme_light() + xlab(&quot;&quot;) + ylab(&quot;&quot;) + theme( panel.grid.major.y = element_blank(), panel.border = element_blank(), axis.ticks.y = element_blank() ) ggp_all &lt;- (g1 |g2 | g4 | g3) + # Create grid of plots with title plot_annotation(title = &quot;Most common words in different genres&#39; titles&quot;, caption=&quot;Frequence&quot;, theme = theme(plot.title = element_text(size = 15), plot.caption =element_text(size=12,hjust = 0.5,vjust=6) )) ggp_all The genre of each plot is hidden. Can you match these four plots with the four genres? It should be easy. The first one, with love having highest frequency, is Romance. We can also see girl, heart, wedding in these titles. The second one have vs, blood, hero, so its obvious Action. What about alien, space, star? Sci_fi movies love these topics! And lastly, for little children, little, magic, christmas. It must be Animation. Do you get them all right? Also we can notice that love is one of the most common words for many genres. Maybe love is the eternal theme for human! 5.4.2 Length of Titles Whats the average length of movie titles and does it change with time? We plot the average length of titles: main_genres &lt;- c(&#39;Comedy&#39;,&#39;Music&#39;,&#39;Documentary&#39;,&#39;Action&#39;,&#39;Sci-Fi&#39;) x &lt;- left_join(title.genres, title.basics, by=&#39;tconst&#39;) x1 &lt;- x %&gt;% filter(genres.x %in% main_genres) %&gt;% mutate(decade=strtoi(startYear)-strtoi(startYear)%%4) x1$len_title = lapply(x1$primaryTitle, function(t){return(length(strsplit(t,&quot; &quot;)[[1]]))}) x1$len_title = as.integer(x1$len_title) x1$genres.x &lt;- with(x1 ,reorder(genres.x,len_title,median)) xlabels = c(1920:2020) for (i in 1:length(xlabels)){ if (strtoi(xlabels[i])%%10!=0){ xlabels[i] &lt;- &quot;&quot; } } x2 &lt;- x1 %&gt;% filter(genres.x %in% main_genres, decade&gt;=1940, decade&lt;=2020) %&gt;% group_by(genres.x, decade) %&gt;% summarise(len=mean(len_title),low=len-sd(len_title)/30,high=len+sd(len_title)/30 ,.groups=&#39;drop&#39;) x2$genres.x &lt;- fct_relevel(x2$genres.x, &#39;Music&#39;, &#39;Documentary&#39;, &#39;Comedy&#39;, &#39;Action&#39;, &#39;Sci-Fi&#39;) x2 %&gt;% ggplot(aes(x=decade, y=len, color=genres.x))+ geom_line()+ ggtitle(&#39;Average length of movie titles&#39;)+ ylab(&#39;Length&#39;) +xlab(&#39;&#39;)+ guides(color=guide_legend(title=&quot;Genre&quot;)) We can see that at first they dont have much difference, but as time develops Music and Documentary have longer titles with average length of 4, and Comedy, Action, Sci-Fi have shorter average titles. It can also be noticed that their average title length was decreasing from 1970 to 2000, but after 2000 their length has been increasing. 5.5 Analysis of Director 5.5.1 Top 10 directors in action genre top_10 &lt;- inner_join(title.genres, title.crew, by=&quot;tconst&quot;) %&gt;% filter(!is.na(directors)) %&gt;% filter(genres==&quot;Action&quot;) %&gt;% inner_join(name.basics %&gt;% select(nconst, primaryName), by=c(&quot;directors&quot;=&quot;nconst&quot;)) %&gt;% group_by(directors, primaryName) %&gt;% summarise(count=n()) %&gt;% arrange(desc(count)) %&gt;% head(10) ggplot(data=top_10, aes(x=reorder(primaryName, count), y=count)) + geom_col(fill=&quot;cornflowerblue&quot;) + coord_flip() + labs(x=&quot;Director&quot;, y=&quot;Number of movies&quot;, title=&quot;Top 10 directors (Action)&quot;) 5.5.2 Distribution of genres for the top 10 directors inner_join(title.genres, title.crew, by=&quot;tconst&quot;) %&gt;% filter(!is.na(directors)) %&gt;% filter(directors %in% top_10$directors) %&gt;% group_by(genres) %&gt;% summarise(count=n()) %&gt;% ggplot(aes(x=reorder(genres, count), y=count)) + geom_col(fill=&quot;cornflowerblue&quot;) + coord_flip() + labs(x=&quot;Genres&quot;, y=&quot;Number of movies&quot;) 5.5.3 Average rating of top 10 directors by genre inner_join(title.genres, title.crew, by=&quot;tconst&quot;) %&gt;% filter(!is.na(directors)) %&gt;% filter(directors %in% top_10$directors) %&gt;% inner_join(title.ratings, by=&quot;tconst&quot;) %&gt;% inner_join(name.basics %&gt;% select(nconst, primaryName), by=c(&quot;directors&quot;=&quot;nconst&quot;)) %&gt;% group_by(genres, primaryName) %&gt;% summarise(rating=mean(averageRating)) %&gt;% ggplot(aes(x=primaryName, y=genres, fill=rating)) + geom_tile() + theme (axis.text.x = element_text (angle = 90, vjust = 1, hjust=1)) "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component From the animation, it can be found that from 1915 to 2020, for most of years, the proportion of each genre has not changed much. The number of dramas has always been the largest among all genres though the proportion of dramas has decreased compared with the proportion 100 years ago. However, an interesting fact is that the proportion of documentaries has surged since 1990. In 1990, the proportion of documentaries ranked 4th or 5th. But in the 21st century, the proportion of documentaries ranked 2nd and got very close to the proportion of dramas. It seems that the number of documentaries will surpass the number of dramas in a few years. We guess the spike in the number of documentaries is due to rapid development of film technology in recent decades. As everyone knows, some documentaries are recreating the original appearance of history, which require the most advanced film technology compared with other genres (drama, comedy, thriller, action and romance). We searched the internet for reason for the spike in the number of documentaries since 1990. We found an article that also attributes the spike to the development of technology. The following 2 paragraphs are extracts from the original article (https://medium.com/@brianrowe_70270/the-growing-technology-in-documentary-filmmaking-78ae31d48ac3). Cut to the dawn of the new millennium, when a movie called The Blair Witch Project comes along to shake up the industry. When a movie like that, which cost just pennies in relation to the millions of dollars it made at the box office, comes along, people start to take notice, and other filmmakers begin to see that in order to be successful, one doesnt need fifty million dollars to make a movie. The last two decades have shown an explosion of documentary films, primarily because the technology now allows for anyone with a dream to go out and make a movie. All one literally needs is a camera, a computer, an editing program, and an idea. "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
